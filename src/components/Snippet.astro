---
import { readFile } from 'fs/promises'

import { Code } from 'astro:components'

interface Props {
  /**
   * Base path from which to resolve snippet
   *
   */
  base?: string
  /**
   * Path from the `base` directory, e.g. `algorithms/union-find/quick-find.ts`
   */
  path: string
  /**
   * Languages supported by the Astro Code component. Add languages here as needed since Astro does
   * not expose this type
   */
  lang?: 'ts' | 'js' | 'astro' | 'c++' | 'yml' | 'ini' | 'css'
}

const { base = './src/snippets', path, lang = 'ts' } = Astro.props

const code = await readFile(`${base}/${path}`, 'utf-8')
---

<code>{path}</code>

<Code code={code} lang={lang} />
