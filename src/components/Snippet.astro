---
import { readFile } from 'fs/promises'

import { Code } from 'astro:components'

interface Props {
  /**
   * Path from the `src/snippets` directory, e.g. `algorithms/union-find/quick-find.ts`
   */
  path: string
  /**
   * Languages supported by the Astro Code component. Add languages here as needed since Astro does
   * not expose this type
   */
  lang: 'ts' | 'js' | undefined
}

const { path, lang = 'ts' } = Astro.props

const code = await readFile(`./src/snippets/${path}`, 'utf-8')
---

<code>{path}</code>

<Code code={code} lang={lang} />
